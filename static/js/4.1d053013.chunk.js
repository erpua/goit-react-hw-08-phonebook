(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[4],{100:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(39);function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,r=!1,c=void 0;try{for(var s,i=e[Symbol.iterator]();!(a=(s=i.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(o){r=!0,c=o}finally{try{a||null==i.return||i.return()}finally{if(r)throw c}}return n}}(e,t)||Object(a.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},130:function(e,t,n){e.exports={section:"Section_section__3K1I9",title:"Section_title__3mM4s"}},131:function(e,t,n){e.exports={form:"Form_form__211hN",label:"Form_label__1unuS",labelName:"Form_labelName__1xNA3",add:"Form_add__3kU6U",info:"Form_info__vxxdq"}},132:function(e,t,n){e.exports={filter:"Filter_filter__1zBts"}},133:function(e,t,n){e.exports={link:"Contacts_link__3yQtP",btnContainer:"Contacts_btnContainer__1llO3",editInput:"Contacts_editInput__xpkna",save:"Contacts_save__3efGM",cancel:"Contacts_cancel__1HI-w",edit:"Contacts_edit__3yeXe",delete:"Contacts_delete__2FlWR"}},176:function(e,t,n){"use strict";n.r(t);var a=n(130),r=n.n(a),c=n(1),s=function(e){var t=e.title,n=e.children;return Object(c.jsxs)("section",{className:r.a.section,children:[Object(c.jsx)("h1",{className:r.a.title,children:t}),n]})},i=n(2),o=n(18),u=n(40),l=n(41),b=n(51),d=n(50),m=n(0),f=n(9),j=n(30),h=function(e){return e.contacts.items},p=function(e){return e.contacts.filter},O=function(e){return e.contacts.loading},v=function(e){return h(e).length},x=Object(j.a)([h,p],(function(e,t){var n=t.toLowerCase();return e.filter((function(e){return e.name.toLowerCase().includes(n)}))})),_=n(15),y=n.n(_),C=n(23),g=n(19),N=n.n(g),w=n(8);N.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var k=n(131),S=n.n(k),A=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={name:"",number:""},e.handleSubmit=function(t){var n=e.props,a=n.onSubmit,r=n.contacts;t.preventDefault();var c=r.find((function(t){return t.name.toLowerCase()===e.state.name.toLowerCase()})),s=r.find((function(t){return t.number===e.state.number}));c?alert("".concat(e.state.name," is already in contacts")):s?alert("".concat(e.state.number," is already in contacts")):a(Object(o.a)({},e.state))},e.handleNameChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState(Object(i.a)({},a,r))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state,t=e.name,n=e.number;return Object(c.jsxs)("form",{className:S.a.form,onSubmit:this.handleSubmit,children:[Object(c.jsxs)("label",{className:S.a.label,children:[Object(c.jsx)("span",{className:S.a.labelName,children:"Name"}),Object(c.jsx)("input",{className:S.a.info,type:"text",name:"name",value:t,placeholder:"Enter your name",onChange:this.handleNameChange,pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"The name can only contain letters, apostrophes, dashes and spaces.",required:!0})]}),Object(c.jsxs)("label",{className:S.a.label,children:[Object(c.jsx)("span",{className:S.a.labelName,children:"Number"}),Object(c.jsx)("input",{className:S.a.info,type:"tel",name:"number",value:n,placeholder:"Enter your number",onChange:this.handleNameChange,pattern:"(\\+?( |-|\\.)?\\d{1,2}( |-|\\.)?)?(\\(?\\d{3}\\)?|\\d{3})( |-|\\.)?(\\d{3}( |-|\\.)?\\d{4})",title:" The phone number must be 11-12 digits and can contain numbers, spaces, dashes, bully brackets and can start with +",required:!0})]}),Object(c.jsx)("button",{type:"submit",className:S.a.add,children:"Add contact"})]})}}]),n}(m.Component),F=Object(f.b)((function(e){return{contacts:h(e)}}),(function(e){return{onSubmit:function(t){return e(function(e){var t=e.name,n=e.number;return function(){var e=Object(C.a)(y.a.mark((function e(a){var r,c,s;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(Object(w.b)()),r={name:t,number:n},e.prev=2,e.next=5,N.a.post("/contacts",r);case 5:c=e.sent,s=c.data,a(Object(w.c)(s)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),a(Object(w.a)(e.t0.message));case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()}(t))}}}))(A),L=n(132),I=n.n(L),z=Object(f.b)((function(e){return{filter:p(e)}}),(function(e){return{onChange:function(t){return e(Object(w.j)(t.target.value))}}}))((function(e){var t=e.filter,n=e.onChange;return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("input",{className:I.a.filter,type:"text",name:"filter",value:t,onChange:n,placeholder:"Search name..."})})})),U=n(100),Z=n(133),q=n.n(Z),E=function(e){var t=e.contacts,n=e.deleteContact,a=e.isLoading,r=e.fetchContacts,s=e.updateContacts,i=e.totalContacts;Object(m.useEffect)((function(){r()}),[r]);var o=Object(m.useState)({status:!1,rowKey:null}),u=Object(U.a)(o,2),l=u[0],b=u[1],d=Object(m.useState)(null),f=Object(U.a)(d,2),j=f[0],h=f[1],p=Object(m.useState)(null),O=Object(U.a)(p,2),v=O[0],x=O[1],_=function(e){var n=e.name,a=e.number,r=e.id,c=t.find((function(e){return e.name.toLowerCase()===n.toLowerCase()&&e.id!==r})),i=t.find((function(e){return e.number===a&&e.id!==r}));c?alert("".concat(n," is already used")):i?alert("".concat(a," is already used")):(!function(e){var t=e.name,n=e.number,a=e.id;s({name:t,number:n,id:a})}({name:n,number:a,id:r}),y())},y=function(){b({status:!1,rowKey:null}),h(null),x(null)};return Object(c.jsxs)("ul",{children:[Object(c.jsxs)("p",{children:["Saved contacts ",i]}),a&&Object(c.jsx)("h1",{children:"Downloading ..."}),t.map((function(e){var t=e.name,a=e.number,r=e.id;return Object(c.jsx)("li",{className:q.a.link,children:l.status&&l.rowKey===r?Object(c.jsxs)("div",{children:[Object(c.jsxs)("form",{children:[Object(c.jsx)("input",{className:q.a.editInput,value:j,onChange:function(e){return h(e.target.value)},type:"text",name:"name",title:"The name can only contain letters, apostrophes, dashes and spaces.",required:!0,pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$"}),Object(c.jsx)("input",{className:q.a.editInput,type:"tel",value:v,name:"number",onChange:function(e){return x(e.target.value)},title:"The phone number must be 11-12 digits and can contain numbers, spaces, dashes, bully brackets and can start with +",required:!0,pattern:"[0-9]{3}-[0-9]{3}-[0-9]{4}"})]}),Object(c.jsx)("button",{className:q.a.save,onClick:function(){return _({id:r,name:j,number:v})},children:"Save"}),Object(c.jsx)("button",{className:q.a.cancel,style:{marginLeft:18},onClick:function(){return y()},children:"Cancel"})]}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("p",{children:t}),Object(c.jsx)("p",{children:a}),Object(c.jsxs)("div",{className:q.a.btnContainer,children:[Object(c.jsx)("button",{className:q.a.edit,onClick:function(){return function(e){var t=e.id,n=e.currentUnitName,a=e.currentUnitNumber;b({status:!0,rowKey:t}),h(n),x(a)}({id:r,currentUnitName:t,currentUnitNumber:a})},children:"Edit"}),Object(c.jsx)("button",{className:q.a.delete,onClick:function(){return n(r)},children:"Delete"})]})]})},r)}))]})},K=Object(f.b)((function(e){return{contacts:x(e),isLoading:O(e),totalContacts:v(e)}}),(function(e){return{deleteContact:function(t){return e(function(e){return function(){var t=Object(C.a)(y.a.mark((function t(n){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(Object(w.e)()),t.prev=1,t.next=4,N.a.delete("/contacts/".concat(e));case 4:n(Object(w.f)(e)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),n(Object(w.d)(t.t0.message));case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()}(t))},fetchContacts:function(){return e(function(){var e=Object(C.a)(y.a.mark((function e(t){var n,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Object(w.h)()),e.prev=1,e.next=4,N.a.get("/contacts");case 4:n=e.sent,a=n.data,t(Object(w.i)(a)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t(Object(w.g)(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}())},updateContacts:function(t){var n=t.name,a=t.number,r=t.id;return e(function(e){var t=e.name,n=e.number,a=e.id;return function(){var e=Object(C.a)(y.a.mark((function e(r){var c,s,i;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(Object(w.l)()),c={name:t,number:n},e.prev=2,e.next=5,N.a.patch("/contacts/".concat(a),c);case 5:s=e.sent,i=s.data,r(Object(w.m)(i)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),r(Object(w.k)(e.t0.message));case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()}({name:n,number:a,id:r}))}}}))(E);t.default=function(){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(s,{title:"Phonebook",children:Object(c.jsx)(F,{})}),Object(c.jsxs)(s,{title:"Contacts",children:[Object(c.jsx)(z,{}),Object(c.jsx)(K,{})]})]})}}}]);
//# sourceMappingURL=4.1d053013.chunk.js.map